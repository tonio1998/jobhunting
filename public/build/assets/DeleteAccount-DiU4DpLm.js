import{c as a,a as i,b as t,d as u,f,n as l,v as c,t as d,p as g,W as y}from"./app-D0q85dhH.js";import{_ as b}from"./_plugin-vue_export-helper-DlAUqK2U.js";const h={data(){return{contact:"",reason:"",loading:!1,message:""}},methods:{async submitForm(){this.loading=!0;try{const s=document.querySelector('meta[name="csrf-token"]'),e=s?s.getAttribute("content"):"",p=await(await fetch("/request-delete-otp",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":e},body:JSON.stringify({contact:this.contact,reason:this.reason})})).json();y.get("/verify-delete-otp",{contact:this.contact})}catch(s){console.error(s),this.message="Something went wrong. Please try again later."}finally{this.loading=!1}}}},v={class:"wrapper"},X={class:"card"},w={class:"form-group"},S={class:"form-group"},D=["disabled"],T={key:0,class:"success"};function _(s,e,m,p,o,r){return i(),a("div",v,[t("div",X,[e[5]||(e[5]=t("h1",null,"Delete Your fgHEMIS Account",-1)),e[6]||(e[6]=t("p",{class:"subtitle"}," Deleting your account is permanent and cannot be undone. Please enter your email to confirm. ",-1)),t("form",{onSubmit:e[2]||(e[2]=f((...n)=>r.submitForm&&r.submitForm(...n),["prevent"])),class:"form"},[t("div",w,[e[3]||(e[3]=t("label",{for:"email"},"Registered Phone",-1)),l(t("input",{type:"",id:"email","onUpdate:modelValue":e[0]||(e[0]=n=>o.contact=n),required:"",placeholder:"+639XXXXXXXXX"},null,512),[[c,o.contact]])]),t("div",S,[e[4]||(e[4]=t("label",{for:"reason"},"Reason for Deletion (optional)",-1)),l(t("textarea",{id:"reason","onUpdate:modelValue":e[1]||(e[1]=n=>o.reason=n),rows:"4",placeholder:"Tell us why you're leaving"},null,512),[[c,o.reason]])]),t("button",{type:"submit",disabled:o.loading},d(o.loading?"Submitting...":"Delete My Account"),9,D)],32),o.message?(i(),a("p",T,d(o.message),1)):u("",!0),e[7]||(e[7]=t("p",{class:"note"},[g(" Need help? Email us at "),t("a",{href:"mailto:support@fghemis.com"},"support@fghemis.com")],-1))])])}const N=b(h,[["render",_],["__scopeId","data-v-407af79a"]]);export{N as default};
