import{_ as D}from"./AppLayout.vue_vue_type_script_setup_true_lang-CFlFSnrk.js";import{c as o,a as r,F as y,e as _,D as F,b as e,t as u,g as M,d as w,A as U,r as i,w as z,o as E,j as b,u as x,k as G,l as H,p as j,q as L}from"./app-C4FdiW2O.js";import{_ as O,a as q}from"./ClickableDropdown-CV5IJwls.js";import{_ as I}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{f as V}from"./useDateFormatter-BhhzoLcc.js";import"./index-D2-jizK3.js";import"./useForwardExpose-CiK9rpWt.js";import"./RovingFocusGroup-CzROTSdC.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-Cf2ecIbm.js";function A(n,l){if(!n){l("error","Unknown error occurred.");return}if(n.response&&n.response.data){const d=n.response.data.errors||n.response.data;typeof d=="string"?l("error",d):typeof d=="object"?Object.values(d).flat().forEach(a=>{l("error",a)}):l("error","Something went wrong.")}else l("error",n.message||"Unexpected error.")}const P={class:"fixed top-4 right-4 space-y-2 z-50 w-96 max-w-full"},W={class:"flex-1"},J=["onClick"],K={__name:"AlertStack",props:{alerts:{type:Array,required:!0}},setup(n){return(l,d)=>(r(),o("div",P,[(r(!0),o(y,null,_(n.alerts,a=>(r(),o("div",{key:a.id,class:F(["px-4 py-3 rounded shadow-md flex items-center gap-2 text-sm border",a.type==="success"?"bg-green-100 text-green-800 border-green-300":a.type==="error"?"bg-red-100 text-red-800 border-red-300":"bg-blue-100 text-blue-800 border-blue-300"])},[e("span",W,u(a.message),1),e("button",{onClick:p=>l.$emit("close",a.id),class:"ml-2 hover:text-opacity-80 focus:outline-none"}," âœ– ",8,J)],2))),128))]))}},Q={key:0,class:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/50"},R=M({__name:"LoadingOverlay",props:{visible:{type:Boolean}},setup(n){return(l,d)=>l.visible?(r(),o("div",Q,d[0]||(d[0]=[U('<div class="bg-white px-15 py-8 rounded-[8px] shadow-lg p-15" data-v-082511b6><div class="flex items-center space-x-3" data-v-082511b6><span class="dot animate-bounce1 bg-blue-400" data-v-082511b6></span><span class="dot animate-bounce2 bg-blue-600" data-v-082511b6></span><span class="dot animate-bounce3 bg-yellow-400" data-v-082511b6></span></div></div>',1)]))):w("",!0)}}),X=I(R,[["__scopeId","data-v-082511b6"]]);let Y=0;function Z(){const n=i([]);return{alerts:n,showAlert:(a,p,c=5e3)=>{const v=++Y;n.value.push({id:v,type:a,message:p}),setTimeout(()=>{n.value=n.value.filter(m=>m.id!==v)},c)},closeAlert:a=>{n.value=n.value.filter(p=>p.id!==a)}}}const ee={key:0,class:"fixed inset-0 flex items-center justify-center bg-black/50 z-50"},te={class:"bg-white p-6 rounded-lg shadow-md w-full max-w-sm"},se={class:"w-full mx-auto py-10 px-4 sm:px-6 lg:px-8"},ne={class:"mb-4 flex items-center justify-between"},ae={class:"overflow-x-auto rounded shadow"},oe={class:"table w-full"},re={class:"text-sm text-gray-700 bg-black/10"},le={class:"space-x-2"},de={class:"uppercase"},ue={key:0},ie={class:"mt-4 flex justify-center space-x-1"},ce=["onClick","innerHTML"],pe=["innerHTML"],ke=M({__name:"Index",props:{filters:Object},setup(n){var N,S;const{alerts:l,showAlert:d,closeAlert:a}=Z(),p=i(!1),c=i({data:[],links:[]}),v=n,m=i(((N=v.filters)==null?void 0:N.search)??""),h=i("fullName"),g=i(((S=v.filters)==null?void 0:S.direction)??"asc"),k=i(!1),C=i({username:"",password:""}),$=async()=>{try{const f=await L.get(route("workers.fetch"),{params:{search:m.value??"",sort:h.value??"fullName",direction:g.value??"asc"}});c.value=f.data}catch(f){A(f,d)}finally{}},T=async f=>{try{const t=await L.get(f);c.value=t.data}catch(t){A(t,d)}finally{}};z([m,h,g],$),E($);const B=[{title:"Workers",href:"/workers"}];return(f,t)=>(r(),o(y,null,[b(x(G),{title:"Students"}),b(X,{visible:p.value},null,8,["visible"]),b(D,{breadcrumbs:B},{default:H(()=>[b(K,{alerts:x(l),onClose:x(a)},null,8,["alerts","onClose"]),k.value?(r(),o("div",ee,[e("div",te,[t[5]||(t[5]=e("h2",{class:"text-lg font-bold mb-4"},"Generated Credentials",-1)),e("p",null,[t[3]||(t[3]=e("strong",null,"Username:",-1)),j(" "+u(C.value.username),1)]),e("p",null,[t[4]||(t[4]=e("strong",null,"Password:",-1)),j(" "+u(C.value.password),1)]),e("button",{class:"mt-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",onClick:t[0]||(t[0]=s=>k.value=!1)}," Close ")])])):w("",!0),e("div",se,[e("div",ne,[b(O,{modelValue:m.value,"onUpdate:modelValue":t[1]||(t[1]=s=>m.value=s),placeholder:"Find something..."},null,8,["modelValue"])]),e("div",ae,[e("table",oe,[e("thead",re,[e("tr",null,[t[6]||(t[6]=e("th",null,"Actions",-1)),e("th",{onClick:t[2]||(t[2]=s=>{h.value="FirstName",g.value=g.value==="asc"?"desc":"asc"}),class:"cursor-pointer"}," Name "),t[7]||(t[7]=e("th",null,"Phone",-1)),t[8]||(t[8]=e("th",null,"Date of Birth",-1)),t[9]||(t[9]=e("th",null,"Civil Status",-1)),t[10]||(t[10]=e("th",null,"Gender",-1)),t[11]||(t[11]=e("th",null,"Nationality",-1)),t[12]||(t[12]=e("th",null,"Created",-1))])]),e("tbody",null,[(r(!0),o(y,null,_(c.value.data,s=>(r(),o("tr",{key:s.id},[e("td",le,[b(q,{items:[{label:"Edit",href:`/guardians/${s.id}/edit`},{label:"Show",href:`/guardians/${s.id}/show`}]},null,8,["items"])]),e("td",de,[e("b",null,u(s.fullName),1),t[13]||(t[13]=e("br",null,null,-1))]),e("td",null,u(s==null?void 0:s.phoneNumber),1),e("td",null,u(x(V)(s==null?void 0:s.dob,"date")),1),e("td",null,u(s==null?void 0:s.civilStatus),1),e("td",null,u(s==null?void 0:s.gender),1),e("td",null,u(s==null?void 0:s.Nationality),1),e("td",null,u(x(V)(s==null?void 0:s.created_at)),1)]))),128)),c.value.data.length===0?(r(),o("tr",ue,t[14]||(t[14]=[e("td",{colspan:"7",class:"text-center text-gray-500 py-4"},"No students found.",-1)]))):w("",!0)])])]),e("div",ie,[(r(!0),o(y,null,_(c.value.links,s=>(r(),o(y,{key:s.label},[s.url?(r(),o("button",{key:0,onClick:me=>T(s.url),innerHTML:s.label,class:F(["px-3 py-1 border rounded text-sm",{"bg-success text-white":s.active,"text-gray-700 hover:bg-gray-100":!s.active}])},null,10,ce)):(r(),o("span",{key:1,innerHTML:s.label,class:"px-3 py-1 border rounded text-sm text-gray-400 cursor-not-allowed"},null,8,pe))],64))),128))])])]),_:1})],64))}});export{ke as default};
