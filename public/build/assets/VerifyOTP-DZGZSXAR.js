import{c as l,a as d,b as t,p as c,t as r,f as m,d as p,n as u,v as f}from"./app-D0q85dhH.js";import{_ as y}from"./_plugin-vue_export-helper-DlAUqK2U.js";const g={props:{contact:{type:String,required:!0}},data(){return{otp:"",message:"",loading:!1}},methods:{async verifyOtp(){this.loading=!0,this.message="";try{const n=document.querySelector('meta[name="csrf-token"]').getAttribute("content"),e=await fetch("/verify-otp",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":n,Accept:"application/json"},body:JSON.stringify({contact:this.contact,otp:this.otp})}),o=await e.json();e.ok?this.message=o.message||"Account successfully deleted.":this.message=o.message||o.error||"Invalid OTP. Please try again."}catch{this.message="An unexpected error occurred. Please try again."}finally{this.loading=!1}}}},x={class:"min-h-screen flex items-center justify-center bg-gray-100 p-4"},b={class:"bg-white shadow-xl rounded-2xl max-w-md w-full p-6 space-y-6"},h={class:"text-center"},w={class:"text-sm text-gray-600 mt-1"},v={class:"font-medium text-black"},O=["disabled"],T={key:0,class:"text-center text-sm text-red-600 mt-2"};function P(n,e,o,_,s,a){return d(),l("div",x,[t("div",b,[t("div",h,[e[4]||(e[4]=t("h1",{class:"text-2xl font-bold text-gray-800"},"Verify OTP",-1)),t("p",w,[e[2]||(e[2]=c(" An OTP has been sent to ")),t("span",v,r(o.contact),1),e[3]||(e[3]=c(". "))]),e[5]||(e[5]=t("p",{class:"text-sm text-gray-500"},"Enter the 6-digit code to confirm deletion.",-1))]),t("form",{onSubmit:e[1]||(e[1]=m((...i)=>a.verifyOtp&&a.verifyOtp(...i),["prevent"])),class:"space-y-4"},[t("div",null,[e[6]||(e[6]=t("label",{class:"block text-sm font-medium text-gray-700"},"OTP Code",-1)),u(t("input",{"onUpdate:modelValue":e[0]||(e[0]=i=>s.otp=i),maxlength:"6",required:"",type:"text",inputmode:"numeric",class:"w-full mt-1 px-4 py-2 border rounded-lg shadow-sm focus:ring focus:ring-yellow-300 focus:outline-none",placeholder:"Enter your OTP"},null,512),[[f,s.otp]])]),t("button",{type:"submit",disabled:s.loading,class:"w-full py-2 rounded-lg font-semibold bg-yellow-500 text-white hover:bg-yellow-600 transition disabled:opacity-50"},r(s.loading?"Verifying...":"Confirm Deletion"),9,O),s.message?(d(),l("p",T,r(s.message),1)):p("",!0)],32)])])}const V=y(g,[["render",P]]);export{V as default};
